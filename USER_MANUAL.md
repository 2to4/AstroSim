# AstroSim ユーザーマニュアル

**AstroSim** - 3D太陽系惑星軌道シミュレーター

バージョン: 1.0.0  
最終更新: 2025年1月

---

## 目次

1. [概要](#概要)
2. [システム要件](#システム要件)
3. [インストール](#インストール)
4. [アプリケーションの起動](#アプリケーションの起動)
5. [基本操作](#基本操作)
6. [詳細機能](#詳細機能)
7. [キーボードショートカット](#キーボードショートカット)
8. [設定とカスタマイズ](#設定とカスタマイズ)
9. [トラブルシューティング](#トラブルシューティング)
10. [技術仕様](#技術仕様)

---

## 概要

AstroSimは、太陽系の8惑星の軌道運動をリアルタイムで3D表示するインタラクティブシミュレーションアプリケーションです。

### 主な機能

- **リアルタイム3D表示**: 太陽系の惑星を正確な軌道で3D表示
- **インタラクティブ操作**: マウスとキーボードによる直感的な操作
- **正確な軌道計算**: 実際の天体力学に基づく高精度シミュレーション
- **カスタマイズ可能**: 表示設定や時間倍率の調整
- **高性能**: 最適化されたレンダリングエンジン

### 対象ユーザー

- 天文学に興味のある方
- 教育関係者（物理・天文学の授業）
- 学生（高校・大学レベル）
- 宇宙開発・天体力学の研究者
- プログラミング学習者

---

## システム要件

### 必須要件

- **OS**: Windows 10/11 (64bit)
- **Python**: 3.8以上
- **メモリ**: 4GB RAM以上
- **グラフィック**: OpenGL 3.0対応GPU
- **ストレージ**: 500MB以上の空き容量

### 推奨要件

- **OS**: Windows 11 (64bit)
- **Python**: 3.10以上
- **メモリ**: 8GB RAM以上
- **グラフィック**: 専用GPU（NVIDIA/AMD）
- **ストレージ**: 1GB以上の空き容量

### 依存関係

AstroSimは以下のライブラリを使用します：

```
PyQt6>=6.5.0           # GUIフレームワーク
vispy>=0.14.0           # 3Dビジュアライゼーション
numpy>=1.24.0           # 数値計算
scipy>=1.10.0           # 科学計算
```

---

## インストール

### 1. Pythonのインストール

1. [Python公式サイト](https://www.python.org/downloads/)からPython 3.8以上をダウンロード
2. インストール時に「Add Python to PATH」にチェックを入れる
3. コマンドプロンプトで `python --version` を実行して確認

### 2. AstroSimのダウンロード

```bash
# GitHubからクローン
git clone https://github.com/2to4/AstroSim.git
cd AstroSim
```

または、[GitHubページ](https://github.com/2to4/AstroSim)からZIPファイルをダウンロードして展開

### 3. 仮想環境の作成（推奨）

```bash
# 仮想環境作成
python -m venv venv

# 仮想環境有効化（Windows）
venv\Scripts\activate

# 仮想環境有効化（macOS/Linux）
source venv/bin/activate
```

### 4. 依存関係のインストール

```bash
# 依存関係インストール
pip install PyQt6 vispy numpy scipy

# または requirements.txtがある場合
pip install -r requirements.txt
```

---

## アプリケーションの起動

### 基本起動

```bash
cd AstroSim
python src/main.py
```

### コマンドラインオプション

```bash
# ヘルプ表示
python src/main.py --help

# バージョン情報表示
python src/main.py --version
```

### 起動確認

正常に起動すると以下が表示されます：

1. **メインウィンドウ**: 3D太陽系表示エリア
2. **制御パネル**: 右側のシミュレーション制御
3. **情報パネル**: 右下の惑星情報表示
4. **メニューバー**: ファイル、表示、シミュレーション、ヘルプ
5. **ツールバー**: よく使う操作のボタン

---

## 基本操作

### 3Dビューの操作

#### マウス操作

| 操作 | 機能 |
|------|------|
| **左ドラッグ** | カメラ回転（方位角・仰角） |
| **右ドラッグ** | カメラパン（中心移動） |
| **ホイール** | ズームイン/アウト |
| **左クリック** | 惑星選択 |

#### カメラ操作のコツ

- **回転**: 左ドラッグで太陽系を様々な角度から観察
- **パン**: 右ドラッグで注目したい領域に移動
- **ズーム**: ホイールで詳細観察と全体把握を切り替え
- **選択**: 惑星をクリックすると詳細情報が表示

### シミュレーション制御

#### 再生・一時停止

- **再生ボタン** または **スペースキー**: シミュレーション開始/停止
- **リセットボタン** または **Ctrl+R**: 初期状態に戻す

#### 時間制御

- **時間倍率スライダー**: シミュレーション速度調整
  - 1x: リアルタイム
  - 10x: 10倍速
  - 100x: 100倍速
  - 1000x: 1000倍速

#### 表示オプション

- **軌道線表示**: 惑星の軌道を線で表示
- **ラベル表示**: 惑星名の表示/非表示
- **カメラ追跡**: 選択した惑星を追跡

---

## 詳細機能

### 惑星情報の表示

惑星をクリックすると、右下の情報パネルに以下が表示されます：

- **基本情報**: 惑星名、質量、半径
- **軌道情報**: 軌道半径、離心率、軌道周期
- **現在位置**: 太陽からの距離、座標
- **物理量**: 軌道速度、運動エネルギー

### プリセットビュー

数字キーで事前定義されたカメラアングルに切り替え：

- **1キー**: 上面ビュー（黄道面上から）
- **2キー**: 側面ビュー（黄道面横から）
- **3キー**: 正面ビュー（太陽正面から）
- **4キー**: 透視図ビュー（3D全体表示）

### 惑星選択

- **5～9キー**: 対応する惑星を直接選択
  - 5: 水星 (Mercury)
  - 6: 金星 (Venus)
  - 7: 地球 (Earth)
  - 8: 火星 (Mars)
  - 9: 木星 (Jupiter)

### カメラ追跡機能

1. 惑星を選択
2. 追跡ボタンまたは **Tキー** で追跡開始
3. **Escキー** で追跡停止

---

## キーボードショートカット

### 基本操作

| キー | 機能 |
|------|------|
| **Space** | アニメーション再生/一時停止 |
| **R** | ビューリセット |
| **T** | 選択惑星の追跡切り替え |
| **Escape** | 選択解除・追跡停止 |

### 表示切り替え

| キー | 機能 |
|------|------|
| **O** | 軌道線表示切り替え |
| **L** | ラベル表示切り替え |
| **G** | グリッド表示切り替え |
| **H** | ヘルプ表示切り替え |

### ビュー切り替え

| キー | 機能 |
|------|------|
| **1** | 上面ビュー |
| **2** | 側面ビュー |
| **3** | 正面ビュー |
| **4** | 透視図ビュー |

### 惑星選択

| キー | 惑星 |
|------|------|
| **5** | 水星 |
| **6** | 金星 |
| **7** | 地球 |
| **8** | 火星 |
| **9** | 木星 |

### システム操作

| キー | 機能 |
|------|------|
| **F1** | ヘルプ表示 |
| **F5** | 表示更新 |
| **F11** | フルスクリーン切り替え |
| **Ctrl+R** | シミュレーションリセット |
| **Ctrl+S** | 画像として保存 |
| **Ctrl+Q** | 終了 |

---

## 設定とカスタマイズ

### 表示設定

#### 3D表示

- **背景色**: 宇宙の背景色を変更
- **惑星サイズ**: 表示用の惑星サイズ倍率
- **軌道線**: 色、太さ、透明度の調整
- **ラベル**: フォントサイズ、色の設定

#### パフォーマンス設定

- **フレームレート**: 描画更新頻度（30-120 FPS）
- **LOD設定**: レベルオブディテール（詳細度）
- **キャッシュサイズ**: 軌道計算キャッシュサイズ

### シミュレーション設定

#### 時間設定

- **開始日時**: シミュレーション開始時刻
- **時間倍率**: デフォルトの再生速度
- **時間ステップ**: 計算精度の調整

#### 物理設定

- **計算精度**: 軌道計算の精度レベル
- **重力計算**: N体問題の計算方法
- **相対論補正**: 一般相対論効果の考慮

### 設定ファイル

設定は以下のファイルに保存されます：

```
AstroSim/
├── config/
│   ├── display.json      # 表示設定
│   ├── simulation.json   # シミュレーション設定
│   └── user.json        # ユーザー設定
```

---

## トラブルシューティング

### よくある問題と解決法

#### 1. アプリケーションが起動しない

**症状**: `python src/main.py` でエラーが発生

**原因と解決法**:
- **依存関係不足**: `pip install PyQt6 vispy numpy scipy`
- **Python未インストール**: Python 3.8以上をインストール
- **PATH設定**: 環境変数PATHにPythonを追加

#### 2. 3D表示が正しく動作しない

**症状**: 画面が黒い、惑星が表示されない

**原因と解決法**:
- **グラフィックドライバ**: 最新ドライバーに更新
- **OpenGL対応**: OpenGL 3.0対応を確認
- **統合GPU**: 専用GPUに切り替え（可能な場合）

#### 3. 動作が重い・カクつく

**症状**: フレームレートが低い、操作に遅延

**原因と解決法**:
- **LOD設定**: 詳細度を下げる
- **フレームレート**: 60fps以下に設定
- **バックグラウンドアプリ**: 他のアプリを終了

#### 4. 計算結果が不正確

**症状**: 惑星位置が現実と異なる

**原因と解決法**:
- **開始日時**: 正しい日時に設定
- **軌道要素**: 最新のデータに更新
- **時間倍率**: 極端に高い倍率を避ける

### エラーメッセージ

#### ModuleNotFoundError: No module named 'PyQt6'

```bash
pip install PyQt6
```

#### ImportError: No module named 'vispy'

```bash
pip install vispy
```

#### OpenGL Error

- グラフィックドライバーを更新
- OpenGL対応状況を確認

### ログファイル

問題が発生した場合、以下のログファイルを確認：

```
AstroSim/logs/astrosim.log
```

---

## 技術仕様

### アーキテクチャ

AstroSimは以下の5層アーキテクチャで設計されています：

1. **UI層**: PyQt6による画面表示
2. **可視化層**: Vispyによる3Dレンダリング
3. **シミュレーション層**: 物理計算エンジン
4. **ドメイン層**: 天体モデル
5. **データ層**: 軌道要素データ管理

### 軌道計算

- **ケプラー軌道**: 楕円軌道の高精度計算
- **摂動計算**: 主要な重力摂動を考慮
- **数値積分**: ルンゲ・クッタ法による高精度計算

### パフォーマンス最適化

- **軌道計算キャッシュ**: 18.9倍の速度向上
- **LOD（レベルオブディテール）**: 1.23倍の描画性能向上
- **フラスタムカリング**: 画面外オブジェクトの描画除外

### データ精度

- **軌道要素**: JPL DE440エフェメリス準拠
- **時間系**: 協定世界時（UTC）
- **座標系**: 国際天球基準座標系（ICRS）

---

## サポート情報

### バグレポート・機能要望

GitHub Issuesで受け付けています：
https://github.com/2to4/AstroSim/issues

### 開発者向け情報

- **ソースコード**: https://github.com/2to4/AstroSim
- **開発ドキュメント**: CLAUDE.md
- **API仕様**: docs/ディレクトリ

### ライセンス

本ソフトウェアはMITライセンスの下で提供されています。

### 更新履歴

- **v1.0.0** (2025-01): 初回リリース
  - 基本的な太陽系シミュレーション機能
  - インタラクティブ3D表示
  - パフォーマンス最適化

---

## 付録

### 天体データ

AstroSimで使用している惑星の軌道要素：

| 惑星 | 軌道半径 (AU) | 離心率 | 軌道周期 (年) |
|------|---------------|--------|---------------|
| 水星 | 0.387 | 0.206 | 0.24 |
| 金星 | 0.723 | 0.007 | 0.62 |
| 地球 | 1.000 | 0.017 | 1.00 |
| 火星 | 1.524 | 0.093 | 1.88 |
| 木星 | 5.203 | 0.049 | 11.86 |
| 土星 | 9.537 | 0.057 | 29.46 |
| 天王星 | 19.191 | 0.046 | 84.01 |
| 海王星 | 30.069 | 0.010 | 164.8 |

### 参考文献

- NASA JPL Planetary and Lunar Ephemerides
- IAU Working Group on Cartographic Coordinates and Rotational Elements
- Astronomical Almanac

---

**AstroSim ユーザーマニュアル**  
© 2025 AstroSim Development Team  
最終更新: 2025年1月